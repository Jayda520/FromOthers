<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Emoji Social Attention (Web)</title>

  <!-- ✅ 本地化 jsPsych -->
  <link rel="stylesheet" href="./lib/jspsych.css">

  <!-- ✅ 顺序：core → plugins → experiment -->
  <script defer src="./lib/jspsych.js"></script>

  <script defer src="./lib/plugin-preload.js"></script>
  <script defer src="./lib/plugin-fullscreen.js"></script>
  <script defer src="./lib/plugin-html-keyboard-response.js"></script>
  <script defer src="./lib/plugin-image-keyboard-response.js"></script>
  <script defer src="./lib/plugin-survey-html-form.js"></script>

  <script defer src="./experiment.js"></script>

  <style>
    /* ===== 全局：一屏显示、禁止溢出 ===== */
    html, body { width: 100%; height: 100%; }
    body {
      margin: 0;
      background: rgb(128,128,128);
      overflow: hidden;              /* ✅ 不允许页面滚动/溢出 */
    }

    /* 隐藏鼠标 */
    body.hide-cursor, body.hide-cursor * { cursor: none !important; }

    /* jsPsych 容器撑满屏幕并居中 */
    #jspsych-target,
    .jspsych-display-element,
    .jspsych-content-wrapper {
      width: 100vw !important;
      height: 100vh !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      overflow: hidden !important;   /* ✅ 一律不溢出 */
    }

    .jspsych-content {
      max-width: 100vw !important;
      max-height: 100vh !important;
      overflow: hidden !important;
    }

    /* ✅ 关键：所有图片“只缩小以适配屏幕”，保证完整显示不裁切 */
    img {
      max-width: 100vw;
      max-height: 100vh;
      width: auto;
      height: auto;
      object-fit: contain;
    }

    /* ===== 你自定义的实验页面布局（experiment.js 会用到） ===== */
    .center-wrap {
      width: 100vw;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      color: #000;
      font-family: "Microsoft YaHei UI","Microsoft YaHei","PingFang SC","Noto Sans CJK SC",sans-serif;
      user-select: none;
      text-align: center;
      overflow: hidden;
      padding: 2vh 2vw;              /* ✅ 给边缘留一点安全区 */
      box-sizing: border-box;
      gap: 2vh;
    }

    /* ✅ 字号自适应：再小屏也不会溢出 */
    .bigtext {
      font-size: clamp(18px, 3.2vw, 50px);
      white-space: pre-line;
      line-height: 1.35;
      max-width: 96vw;
    }

    .fix {
      font-size: clamp(36px, 6vw, 90px);
      line-height: 1;
      margin: 0;
    }

    /* 两图并排布局：间距也自适应，防止小屏挤爆 */
    .row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: clamp(40px, 10vw, 260px);
      max-width: 96vw;
    }

    /* ✅ 刺激框：保持你要的 194×194，但也不允许超屏（小屏自动缩） */
    .imgbox {
      width: min(194px, 28vw);
      height: min(194px, 28vw);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .imgbox img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* 保险：表单/按钮也别溢出 */
    input, select, button, textarea {
      max-width: 90vw;
      font-size: clamp(14px, 2.2vw, 18px);
    }
  </style>
</head>

<body class="hide-cursor">
  <noscript>请启用 JavaScript 以运行实验。</noscript>
</body>
</html>
